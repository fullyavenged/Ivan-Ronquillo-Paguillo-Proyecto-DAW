<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>#{auth.user.username}'s Profile</title>
	<link
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
		rel="stylesheet"
		integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
		crossorigin="anonymous"></link>
		<link rel="stylesheet" href="../CSS/Profiles.css"></link>
	
</h:head>
<h:body>
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
	<div class="container-fluid">
		<h:form>
			<h:commandLink class="navbar-brand" action="#{profile.goHome()}"
				value="Home"></h:commandLink>
		</h:form>
		<button class="navbar-toggler" type="button" data-bs-toggle="collapse"
			data-bs-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent" aria-expanded="false"
			aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav me-auto mb-2 mb-lg-0">
				<li class="nav-item"><h:form>
						<h:commandLink class="nav-link" aria-current="page"
							action="#{search.searchAnime()}" value="Anime"></h:commandLink>
					</h:form></li>
				<li class="nav-item"><h:form>
						<h:commandLink class="nav-link" aria-current="page"
							action="#{search.searchManga()}" value="Manga"></h:commandLink>
					</h:form></li>
			</ul>
			<div class="log">
				<h:form>
					<h:commandLink rendered = "#{auth.user.username != null}" action="#{login.doLogOut()}"
						value="Log out"></h:commandLink>
				</h:form>
			</div>
		</div>
	</div>
	</nav>
	<div class="container-fluid">
		<div class="row">
			<aside class="col-lg-4">
			<div class="row">
				<h2>#{auth.user.username}'s Profile</h2>
				<hr></hr>
			</div>
			<div class="row">
				<img src="#{auth.user.image}" class="img-fluid col-lg-6"></img>
			</div>
			
			<div class="row">
				<button type="button" class="profileimg"
				data-toggle="modal" data-target="#editimg">Change Image</button>
			</div>
			
			<div class = "row">
			<div class = "profB">
			<h:form>
				<h:commandLink class="login" action="#{profile.goAnimeList()}"
					value="Anime List"></h:commandLink>
			</h:form> 
			</div>
			<div class = "profB">
			<h:form>
				<h:commandLink style="text-align: center !important;" action="#{profile.goMangaList()}"
					value="Manga List"></h:commandLink>
			</h:form> 
			</div>
			</div>
			
			</aside>

			<article class="col-lg-8">
			<div class="row">
				<!-- 	Circulos para los estados	<div style = "border-radius: 100%; background-color: green; height: 10px !important; width: 10px !important; line-height: 10px !important; padding: 0px;"></div>
 -->
				<div>
					<h5>Anime Stats</h5>
				</div>
				<div class="row">
					<ul class="col-lg-3">
						<li class="watch">Watching <span>#{profile.watching}</span>
						</li>
						<li class="completed">Completed <span>#{profile.completed}</span>
						</li>
						<li class="dropped">Dropped <span>#{profile.dropped}</span>
						</li>
					</ul>
					<ul class="col-lg-3 list2">
						<li>Total Animes <span>#{profile.totalAnime}</span>
						</li>
						<li>Total Chapters <span>#{profile.totalChaptersA}</span>
						</li>
					</ul>
				</div>
			</div>
			
			<div class="row" style="margin-top:5%;">
				<!-- 	Circulos para los estados	<div style = "border-radius: 100%; background-color: green; height: 10px !important; width: 10px !important; line-height: 10px !important; padding: 0px;"></div>
 -->
				<div>
					<h5>Manga Stats</h5>
				</div>
				<div class="row">
					<ul class="col-lg-3">
						<li class="watch">Reading <span>#{profile.watchingM}</span>
						</li>
						<li class="completed">Completed <span>#{profile.completedM}</span>
						</li>
						<li class="dropped">Dropped <span>#{profile.droppedM}</span>
						</li>
					</ul>
					<ul class="col-lg-3 list2">
						<li>Total Mangas <span>#{profile.totalManga}</span>
						</li>
						<li>Total Episodes <span>#{profile.totalChaptersM}</span>
						</li>
					</ul>
				</div>
			</div>
			</article>


		</div>
	</div>
	<h:form>
	<div class="modal fade" id="editimg" tabindex="-1"
				role="dialog" aria-labelledby="exampleModalCenterTitle"
				aria-hidden="true">
				<div class="modal-dialog modal-dialog-centered" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="exampleModalLongTitle">Change Profile Image</h5>
							<button type="button" class="btn-close" data-dismiss="modal"
								aria-label="Close">
				
							</button>
						</div>
						<div class="modal-body">
							<div class="box">
							<h:form>
								<p>URL de la imagen</p>
								<p:inputText value="#{auth.user.image}"></p:inputText>
							</h:form>
							</div>
						</div>
						<div class="modal-footer">

							<h:commandButton
								action="#{profile.updateUser()}"
								class="btn btn-primary" value="Update Image"></h:commandButton>

						</div>
					</div>
				</div>
			</div>
			</h:form>
				<!-- Optional JavaScript -->
	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
		crossorigin="anonymous"></script>
		
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
		crossorigin="anonymous"></script>

	<script>	

		$('#myModal').on('shown.bs.modal', function() {
			$('#myInput').trigger('focus')
		})
	</script>
</h:body>
</html>